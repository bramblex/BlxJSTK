(function(f,b){(function(a,d){d=d||a;a=Array.isArray(a)&&a||[];if("function"===typeof b&&b.amd)b(a,d);else if("function"===typeof b&&b.cmd)b(a,function(g,c,h){h.exports=d.apply(f,a.map(function(c){return g(c)}))});else if("object"===typeof exports)module.exports=d.apply(f,a.map(function(a){return require(a)}));else{var e=document.currentScript.src.replace(/(^.*?)([^\/]+)\.(js)(\?.*$|$)/,"$2"),e=e.replace(".min","");f[e]=d.apply(f,a.map(function(a){return f[a.replace(/^.*\//,"")]}))}})(["./EventEmitter",
"./Class"],function(a,d){var e=d("History",Array);e.method("top",function(){return this[this.length-1]});var b=a.extend("Router");b.method("constructor",function(){b.uper("constructor").apply(this);this.default_controller="main";this.default_action="index";this.history=null}).method("parse",function(c){var a={};a.url=c;var b=c.split("?");c=b[0];b=b[1];a.pathname=c.replace(/\/{2,}/g,"/");if((a.querystring=b)&&b.length){var d={};b.split("&").forEach(function(a,b,c){(a=a.match(/(.*)=(.*)/))&&(d[a[1]]=
a[2])});a.args=d}c=c.split("/").filter(function(a){return a.length});a.parsed={controller:c[0]||this.default_controller,action:c[1]||this.default_action,arguments:c.slice(2)};this.history&&this.history.push(a);return a}).method("setHistory",function(){this.history=e()}).method("back",function(){var a=this.history;a&&a.pop();return a.top()});b.History=e;return b})})(this,"undefined"!==typeof define&&define);
